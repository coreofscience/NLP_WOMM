---
title: "Preprocessing_data_NPL_WOMM"
author: "Sebastian Robledo"
date: "9/4/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Creating the environment

```{r}
library(tidyverse)
library(extractr)
library(here)
library(pdftools)
```

# Getting data 

```{r}
pdfs <- 
  list.files(here("data/pdfs")) |> 
  tibble() |>
  rename(papers = "list.files(here(\"data/pdfs\"))") |> 
  filter(!(papers %in% "Icon\r")) 
  

df <- tibble()

for (i in pdfs$papers) {
  
  df_1 <- 
    pdf_text(pdf = here("data/pdfs", i)) |> # read pdf
    read_lines() %>% 
    tibble() %>% 
    rename(doc_line = ".") %>% 
    filter(doc_line != "") |> 
    summarise(doc_line = paste0(doc_line, collapse = " ")) # transforme
  
  df <- 
    bind_rows(df_1,
              df)
  
}

```


```{r}
write_csv(df, here("data", "wos_txt.csv"))
```


